<ion-view>
    <ion-nav-title>{{ ::vm.category.title }}</ion-nav-title>

    <ion-nav-buttons side="right">
        <button class="button button-icon ion-grid"
                ui-sref="app.portals" ng-if="vm.portalIcon"></button>
        <button class="button button-icon ion-cube"
                ui-sref="app.office.vpo" ng-if="vm.companyIcon"></button>
        <button class="button button-icon ion-android-search"
                ng-click="vm.showSearchbar()"></button>
    </ion-nav-buttons>

    <ion-content ng-class="{ 'has-subheader': vm.categories.length }" on-swipe-right="vm.prev()" on-swipe-left="vm.next()"
                 style="background-color: #eee;">
        <section ng-show="vm.loading" class="text-center padding">
            <ion-spinner></ion-spinner>
        </section>
        <section ng-show="!vm.loading && !vm.items.length" class="padding">
            <h3 class="text-center assertive" ng-cloak>Oops, something went wrong</h3>
        </section>
        <section ng-show="!vm.loading" style="padding-bottom: 10px">
            <div ng-show="vm.items.length">
                <div ng-repeat="item in vm.items" class="card" layout="row" layout-align="start center" style="min-height: 70px">
                    <div flex>

                        <a ng-click="vm.go($event, 'app.article', { id: item.itemid })">
                            <h3 class="itw-section stable" ng-if="item.topic">
                                {{ item.topic }}
                            </h3>
                            <h2>{{ item.title }}</h2>
                        </a>

                        <p class="ellipsis">
                            <itw-timestamp timestamp="'{{ item.created }}'"></itw-timestamp>

		                	<span class="assertive" ng-if="item.topic">
		                		<i class="icon ion-edit" style="" ng-if="item.topic"></i>
		                		{{ item.created_by_alias }}
			                </span>
				            <span ng-if="item.section.id" class="assertive" ng-click="vm.go($event, 'app.section', { id: item.section.id })" stop-event="click">
					        	<span class="stable">|</span> {{ item.section.title }}
			                </span>
			                <span ng-if="item.copyPath" class="assertive">
					        	<span class="stable">|</span> {{ item.company }}
			                </span>
                        </p>
                    </div>
                    <a ng-click="vm.go($event, 'app.article', { id: item.itemid })">
                        <img ng-src="{{ item.introtextImg }}" ng-if="item.introtextImg" style="float:right; margin: 0 0 0 4px; "/>
                    </a>
                </div>
            </div>
        </section>
    </ion-content>
</ion-view>
